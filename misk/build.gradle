apply plugin: 'kotlin'
apply plugin: 'org.junit.platform.gradle.plugin'

compileKotlin {
  kotlinOptions {
    jvmTarget = "1.8"
  }
}
compileTestKotlin {
  kotlinOptions {
    jvmTarget = "1.8"
  }
}

sourceSets {
  main.java.srcDirs += 'src/main/kotlin/'
  test.java.srcDirs += 'src/test/kotlin/'
}

dependencies {
  compile dep.kotlinStdLib
  compile dep.bouncycastle
  compile dep.guava
  compile dep.guice
  compile dep.guiceMultibindings
  compile dep.okHttp
  compile dep.kotlinReflection
  compile dep.moshi
  compile dep.jettyServer
  compile dep.jettyServlet
  compile dep.jettyWebsocketServlet
  compile dep.jettyWebsocketServer
  compile dep.kubernetesClient
  compile dep.wireRuntime
  compile dep.loggingApi
  compile dep.jacksonDatabind
  compile dep.jacksonDataformatYaml
  compile dep.jacksonKotlin
  compile dep.jacksonJsr310
  compile dep.metricsCore
  compile dep.metricsParent
  compile dep.metricsGraphite
  compile dep.metricsSignalFx
  compile dep.metricsStackDriver
  compile dep.gcpDatastore
  compile dep.gcpKms
  compile dep.gcpCloudStorage
  compile dep.jCommander
  compile dep.openTracing
  compile dep.openTracingOkHttp
  compile dep.tracingJaeger
  compile dep.tracingZipkin
  compile dep.zipkinReporter
  compile dep.zipkinBrave
  compile dep.retrofit
  compile dep.retrofitMoshi

  testCompile project(':misk/testing')
}

jar {
  into("web/admin") {
    from("web/admin/build")
  }
}

apply from: rootProject.file('gradle/gradle-mvn-push.gradle')
